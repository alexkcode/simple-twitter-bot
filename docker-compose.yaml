version: '3'

services:

  # mongodb:
  #   image: mongo:latest
  #   hostname: mongodb
  #   ports:
  #       - '27017:27017'
  #   environment:
  #       - MONGO_REPLICA_SET_NAME=dan
  #   command:
  #       - --storageEngine
  #       - wiredTiger
  #       - --replSet
  #       - myrepl
  #   healthcheck:
  #       test: test $$(echo "rs.initiate().ok || rs.status().ok" | mongo  --quiet) -eq 1
  #       interval: 10s
  #       start_period: 30s

  redis-server:
    image: redis:latest
    hostname: redis

  flask:
    # image: 'alexkcode/webhook-flask-listener:latest'
    build:
      context: bots
      dockerfile: Dockerfile
    volumes:
      - ./bots:/app
    ports:
      - '5000:5000'
    # environment:
    #   MONGODB_DATABASE: flaskdb
    #   MONGODB_USERNAME: flaskuser
    #   MONGODB_PASSWORD: your_mongodb_password
    #   MONGODB_HOSTNAME: mongodb
    # depends_on:
    #   - mongodb